<html>
<head>

</head>
<body>

<fieldset>
    <legend>PUBLISH</legend>
    <p>
        <button onclick="start()">start</button>
        <button onclick="unPublish()">unpublish</button>
    </p>
    <p>
        <button onclick="createDC()">New DC</button>
        <button onclick="sendDC()">Send DC</button>
        <button onclick="createDC2()">New DC2</button>
        <button onclick="sendDC2()">Send DC2</button>
    </p>
</fieldset>
local:
<p>
    <video id="lv" autoplay></video>
</p>
remote:
<p>
    <video id="v" autoplay></video>
</p>
<script>
    const signaling = new SignalingChannel();
    const configuration = {iceServers: [{urls: 'stuns:stun.example.org'}]};
    const audio = null;
    const audioSendTrack = null;
    const video = null;
    const videoSendTrack = null;
    const started = false;
    let pc;

    async function start() {
        pc = new RTCPeerConnection(configuration)
        // let the "negotiationneeded" event trigger offer generation
        pc.onnegotiationneeded = async () => {
            try{
                await pc.setLocalDescription(await pc.createOffer());
                signaling.send(JSON.stringify({desc: pc.localDescription}));

            }catch (err) {
                console.error(err);
            }
        }

        try{
            navigator.mediaDevices.getUserMedia({audio: true, video: true});

        }catch (err) {
            console.error(err);
        }
    }


</script>
</body>
</html>
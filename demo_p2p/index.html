<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>P2P - WebRTC</title>
    <script src="webrtc.io.js"></script>
</head>
<body>
<fieldset>
    <legend>JOIN</legend>
    <p>group_id:<input id="group_id"/>
        <button onclick="join()">JOIN</button>
        ID:<span id="id"></span></p>
</fieldset>
<fieldset>
    <legend>PUBLISH</legend>
    <p>
        <button onclick="publishCAM()">cam</button>
        <button onclick="unPublish()">unpublish</button>
    </p>
    <p>
        <button onclick="createDC()">New DC</button>
        <button onclick="sendDC()">Send DC</button>
        <button onclick="createDC2()">New DC2</button>
        <button onclick="sendDC2()">Send DC2</button>
    </p>
</fieldset>
<fieldset>
    <legend>RD</legend>
    <p>
        <button onclick="controllee()">±»¿Ø¶Ë</button>
        <button onclick="controller()">¿ØÖÆ¶Ë</button>
    </p>
</fieldset>
source:
<p>
    <video id="source" src="https://sample-videos.com/video123/mp4/240/big_buck_bunny_240p_1mb.mp4" ></video>
</p>
canvas:
<p>
    <canvas id="canvas" width="300" height="300"></canvas>
</p>


local:
<p>
    <video id="local" autoplay></video>
</p>
remote:
<p>
    <video id="remote" autoplay></video>
</p>
<fieldset>
    <legend>LOG</legend>
    <p id="console" style="width:100%;font-size:14px;"></p>
</fieldset>
<div id="listener"></div>

<script>
    var cameraStream;
    rtc.connect('wss://192.168.1.2/ws');
    function join() {
    }
    function log(content) {
        document.getElementById("console").innerHTML += content + '<br/>';
    }
    function publishCAM() {
        rtc.createStream({video: true, audio: false}, function (stream) {
            rtc.publishStream(stream, 'local');
        });
    }
    function unPublish() {
        rtc.unPublishStream();
    }

    var channel, channel2;

    function createDC() {
        channel = client.createDataChannel("Test1");
        channel.onmessage = function (data) {
            alert(data)
        }
    }

    function sendDC() {
        channel.send("test1");
    }

    function createDC2() {
        channel2 = client.createDataChannel("Test2");
        channel2.onmessage = function (data) {
            alert(data)
        }
    }

    function sendDC2() {
        channel2.send("test2");
    }

    function controllee() {
        publishScreen();
        dc_rd = client.createDataChannel("RD");
        dc_rd.onmessage = function (data) {
            post(data)
        }
    }

    var dc_rd;

    function controller() {
        init_controller(document.getElementById('v'));
    }

</script>

</body>
</html>